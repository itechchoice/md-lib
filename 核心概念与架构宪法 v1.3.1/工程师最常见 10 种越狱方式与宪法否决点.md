# 工程师最常见 10 种越狱方式与宪法否决点

好，下面是你要的 **📘《工程师最常见 10 种越狱方式与宪法否决点》**。

这是**可以直接放进 Notion / Governance / Execution 指南**的一页，定位非常清晰：

> 不是教育工程师“要自觉”，
> 

> 而是给架构评审、Code Review、平台治理一个“一眼否决表”。
> 

我会用 **「越狱方式 → 为什么会发生 → 宪法否决点 → 正确做法」** 的结构来写，

确保 **每一条都能直接落到你现有宪法条款上**。

---

# **📘 工程师最常见 10 种越狱方式**

## **及其宪法否决点（Anti-Escape Guide）**

> 本页面用于识别并否决在实现阶段
> 

> 试图绕过《核心概念与架构宪法》权力约束的常见行为
> 

---

## **1️⃣ 在 Workspace 中写 if / else 控制流程**

### **❌ 越狱方式**

```
if (result === 'approved') {
  callNextStep();
} else {
  rollback();
}
```

### **🤔 为什么工程师会这么写**

- “我已经知道下一步了”
- “少走一圈 Orchestrator”

### **🚫 宪法否决点**

- **Violation**：Execution Context 越权
- **条款依据**：
    - Interaction Surface 不拥有流程推进权
    - Workspace 只能执行 Step Descriptor

### **✅ 正确做法**

- 所有分支 **必须在 Decision Plane 的 Assembly 中显式定义**
- Workspace 只返回 Result Type

---

## **2️⃣ 在 Tool / Capability 内部调用另一个 Tool**

### **❌ 越狱方式**

```
def payment_tool():
    validate()
    audit()   # 偷偷调另一个 Tool
```

### **🤔 为什么会发生**

- “这个 Tool 本来就顺路”
- “减少一次编排”

### **🚫 宪法否决点**

- **Violation**：Execution Plane 内部形成隐性流程
- **条款依据**：
    - Tool 是能力原子，不是流程节点
    - Tool 不得触发新执行

### **✅ 正确做法**

- 每个 Tool **只做一件事**
- Tool 组合只能通过 Assembly + Orchestration

---

## **3️⃣ 在 Connector 里做重试 / fallback**

### **❌ 越狱方式**

```
retry(3, callExternalAPI)
```

### **🤔 为什么会发生**

- “网络不稳定”
- “提升成功率”

### **🚫 宪法否决点**

- **Violation**：隐性重决策
- **条款依据**：
    - Retry / Fallback 必须是 Assembly 显式分支
    - Execution Phase 禁止隐性重试

### **✅ 正确做法**

- Retry 作为 **明确 Step**
- 或 Fail Fast → 新一次执行

---

## **4️⃣ Orchestrator 根据执行结果“聪明地跳步”**

### **❌ 越狱方式**

```
if (alreadyApproved) skipStep();
```

### **🤔 为什么会发生**

- “优化流程”
- “减少不必要步骤”

### **🚫 宪法否决点**

- **Violation**：State Orchestration 越权
- **条款依据**：
    - Orchestration 只能推进状态
    - 不得解释业务语义

### **✅ 正确做法**

- 决策逻辑必须在 Decision Plane
- Orchestrator = 纯状态机

---

## **5️⃣ Session / Context 中缓存“决策结果”**

### **❌ 越狱方式**

```
session.context = { approved: true }
```

### **🤔 为什么会发生**

- “避免重复判断”
- “加快响应”

### **🚫 宪法否决点**

- **Violation**：Interaction Context 偷权
- **条款依据**：
    - Context 只能承载，不得影响路径
    - 不得作为决策输入源

### **✅ 正确做法**

- 决策结果只存在于：
    - Assembly
    - Orchestration State

---

## **6️⃣ Gateway / Ingress 层“顺手做判断”**

### **❌ 越狱方式**

```
if (token.role === 'admin') allow();
```

### **🤔 为什么会发生**

- “安全判断越早越好”
- “减少后端负担”

### **🚫 宪法否决点**

- **Violation**：Ingress 半决策化
- **条款依据**：
    - Gateway 是 PEP，不是 PDP
    - 不得做策略选择

### **✅ 正确做法**

- Gateway 只做：
    - 校验
    - 转发
- 决策在 Control / Decision Plane

---

## **7️⃣ 运行期修改 Assembly / VCS**

### **❌ 越狱方式**

```
assembly.steps.push(newStep)
```

### **🤔 为什么会发生**

- “临时补救”
- “这次情况特殊”

### **🚫 宪法否决点**

- **Violation**：时间单向性破坏
- **条款依据**：
    - Assembly / VCS 在执行期冻结
    - 不可变更

### **✅ 正确做法**

- Fail Fast
- 发起新一轮 Decision + Execution

---

## **8️⃣ 用异常机制“偷偷改流程”**

### **❌ 越狱方式**

```

```

### **🤔 为什么会发生**

- “异常就是另一条路”
- “工程直觉”

### **🚫 宪法否决点**

- **Violation**：异常 = 隐性分支
- **条款依据**：
    - 异常只是状态
    - 不得触发新路径

### **✅ 正确做法**

- 异常 → Result Type
- 分支 → Assembly 显式定义

---

## **9️⃣ 在 Cleanup / Rollback 中偷偷“补救”**

### **❌ 越狱方式**

```

```

### **🤔 为什么会发生**

- “不然系统看起来太傻”
- “用户体验不好”

### **🚫 宪法否决点**

- **Violation**：Cleanup 变成 Agent
- **条款依据**：
    - Cleanup 属于 Execution
    - 不得触发新执行

### **✅ 正确做法**

- Cleanup 只清理副作用
- 补救 = 新任务

---

## **🔟 “就这一次”的临时特例**

### **❌ 越狱方式**

> “这个客户特殊，先 hardcode 一下”
> 

### **🤔 为什么会发生**

- 业务压力
- 时间紧

### **🚫 宪法否决点**

- **Violation**：制度被情境覆盖
- **条款依据**：
    - 宪法优先级高于业务成功

### **✅ 正确做法**

- 要么：
    - 上升为 Decision / Assembly 模式
- 要么：
    - 明确迁出 ABC 体系

---

# **🧠 总结裁决（给评审用）**

> 所有“越狱行为”都有一个共同特征：
> 

> 它们试图把“方便”转化为“隐性权力”。
> 

而你的架构宪法的核心原则只有一句话：

> 权力必须显式、集中、一次性行使，
> 

> 不能分散在执行细节中。
> 

---

## **📌 使用建议**

- 放在：
    - ABC - Operations / Governance
- 用于：
    - 架构评审
    - PR Review
    - 新工程师 onboarding
- 每次争议时：
    - **对照本页逐条核对**

---

如果你愿意，下一步我可以帮你做 **最后一步“工具化”**：

1. 🧱 把这 10 条 **压缩成 Code Review Checklist**
2. 🚨 把每一条 **映射成自动检测规则**
3. 📘 做一页 **《如果用 Agent，会在哪 10 个地方失控》对照表**

你选一个，我继续。